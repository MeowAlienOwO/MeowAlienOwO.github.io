<!doctype html lang="zh">
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Application Layer &#8211; 喵窝[0]号机</title>
<meta name="description" content="notes for communication layer">

<meta name="keywords" content="application layer, cs, notes">

<!-- other plugins config -->
<!-- mathjax -->
<script type="text/javascript"
	src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$', '$'], [ '\\(', '\\)']]}});
</script>

<!-- Share.js -->
<link href="/assets/css/share.min.css" rel="stylesheet">
<script type="text/javascript" src="/assets/js/vendor/share.min.js"></script>
<!-- end of plugins -->

<meta http-equiv="content-type" content="text/html; charset=utf-8" />


<!-- Open Graph -->
<!-- <meta property="og:locale" content="en_US"> -->
<meta property="og:locale" content="zh_CN" />
<meta property="og:type" content="article">
<meta property="og:title" content="Application Layer">
<meta property="og:description" content="notes for communication layer">
<meta property="og:url" content="http://MeowAlienOwO.github.io/computer%20science/network/application_layer/">
<meta property="og:site_name" content="喵窝[0]号机">





<link rel="canonical" href="http://MeowAlienOwO.github.io/computer%20science/network/application_layer/">
<link href="http://MeowAlienOwO.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="喵窝[0]号机 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://MeowAlienOwO.github.io/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">
<!--
     <link href="//fonts.useso.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css"> -->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://MeowAlienOwO.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://MeowAlienOwO.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://MeowAlienOwO.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://MeowAlienOwO.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://MeowAlienOwO.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://MeowAlienOwO.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://MeowAlienOwO.github.io/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://MeowAlienOwO.github.io/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://MeowAlienOwO.github.io/images/avatar.png" alt="死鱼眼的喵星人 photo" class="author-photo">
					<h4>死鱼眼的喵星人</h4>
					<p>烈風？いいえ、知らない子ですね。（もぐもぐ</p>

				</li>
				<li><a href="http://MeowAlienOwO.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:meowalienowo@outlook.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				
				
				
				
				<li>
					<a href="http://github.com/https://github.com/MeowAlienOwO"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://MeowAlienOwO.github.io/posts/">All Posts</a></li>
				<li><a href="http://MeowAlienOwO.github.io/tags/">All Tags</a></li>
				
				<li>
				  <a href="/categories/hello/">
				    hello (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/jekyll/">
				    jekyll (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/Computer Science/">
				    Computer Science (12)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/Math/">
				    Math (2)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/Operating System/">
				    Operating System (3)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/ACG/">
				    ACG (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/空之境界/">
				    空之境界 (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/C++/">
				    C++ (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/Network/">
				    Network (7)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/自言自语/">
				    自言自语 (2)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/日本語/">
				    日本語 (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/japanese/">
				    japanese (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/11区生活/">
				    11区生活 (2)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/生活/">
				    生活 (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/linux/">
				    linux (1)
				  </a>
				</li>
				
				<li>
				  <a href="/categories/Machine Learning/">
				    Machine Learning (1)
				  </a>
				</li>
				
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.pixiv.net/member_illust.php?mode=medium&illust_id=50388846">榛名は大丈夫です！ | YAMAno [pixiv]</a></div><!-- /.image-credit -->
  <div class="entry-image">
    
    <img src="http://MeowAlienOwO.github.io/images/50388846.jpg" alt="Application Layer">
    

  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://MeowAlienOwO.github.io/computer%20science/network/application_layer/" rel="bookmark" title="Application Layer">Application Layer</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2015-05-15T22:06:18+08:00">May 15, 2015</time></span></h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p>关于应用层，最后一篇……終わった……小天使求治愈www</p>

<h1 id="section">网络应用原则</h1>

<p>在处理应用时，我们需要考虑的是丢包，流量，是否时间敏感等等</p>

<h2 id="section-1">应用架构</h2>

<h3 id="section-2">客户端-服务端</h3>
<p>服务端：一直运行的主机，拥有固定IP地址，是数据中心。</p>

<p>客户端：可以同服务器通信，可以任意时刻链接，可能有动态IP地址，不需要互相之间直接交流</p>

<h3 id="p2p">P2P</h3>

<p>不存在总是上线的服务器，各种终端系统自由交流。终端从别的终端得到服务，同时也向他人提供服务。各个终端间歇性地连接在一起，需要复杂的管理手段。</p>

<h2 id="socket">套接字(socket)</h2>

<p>终端通过套接字发送/接收信息</p>

<p>地址处理：通过IP地址与接口号可以确定在主机上的程序。</p>

<h1 id="webhttp">Web与HTTP</h1>

<h2 id="httphypertext-transfer-protocal">超文本传输协议 HTTP:Hypertext transfer protocal</h2>

<p>网络的应用层协议，建立在C/S模型上。</p>

<ul>
  <li>客户端：发送浏览请求，通过http接受请求，然后展示网络对象。</li>
  <li>服务端：服务端根据请求返回网络对象</li>
</ul>

<p>使用TCP协议：</p>

<ul>
  <li>客户端初始化TCP连接，端口为80</li>
  <li>服务端接受客户端连接</li>
  <li>HTTP消息在浏览器与服务器之间传输</li>
  <li>结束TCP连接</li>
</ul>

<p>HTTP是”无状态”(stateless)的：服务端不需要保存过去的客户端请求。</p>

<h2 id="cookies">用户-服务器状态：cookies</h2>

<p>许多网站使用cookies。Cookie，有时也用其复数形式Cookies，指某些网站为了辨别用户身份、进行session跟踪而储存在用户本地终端上的数据（通常经过加密）。定义于RFC2109和2965都已废弃，最新取代的规范是RFC6265。服务器可以利用Cookies包含信息的任意性来筛选并经常性维护这些信息，以判断在HTTP传输中的状态。Cookies最典型的应用是判定注册用户是否已经登录网站，用户可能会得到提示，是否在下一次进入此网站时保留用户信息以便简化登录手续，这些都是Cookies的功用。另一个重要应用场合是“购物车”之类处理。用户可能会在一段时间内在同一家网站的不同页面中选择不同的商品，这些信息都会写入Cookies，以便在最后付款时提取信息。</p>

<p>cookie头保存HTTP返回信息与下一个请求信息，cookie文件被用户主机所保存，由用户浏览器管理。cookie与协议终点来共同维护状态。</p>

<h2 id="section-3">网络缓存(代理服务器)</h2>

<p>目的：在不打扰服务端的情况下满足客户端需求。</p>

<p>浏览器将所有的HTTP请求发送给缓存服务器。如果网络对象在缓存里，则直接返回该对象；如果不在缓存里，则向源服务器发送请求，然后将对象保存在缓存里。</p>

<p>使用缓存可以减少请求-返回的时间，同时减少了信息交通量。缓存同时使得“贫穷的”内容提供商可以有效地提供内容。</p>

<p>缓存同时保存一份最晚更新时间，当连接到服务器时，检查一下时间，如果不是最新的，则更新缓存。</p>

<h1 id="section-4">电子邮件</h1>

<h2 id="smtp">SMTP</h2>
<p>三个主要组成：</p>

<ul>
  <li>用户代理(邮件阅读器):创建，编辑，读取邮件信息，发送与传入信息存储在服务器上</li>
  <li>邮件服务器：信箱(mailbox)保存用户的传入信息，消息队列(message queue)用于保存传出信息。</li>
  <li>简单邮件传送协议：SMTP(simple mail transfer protocal)：client-发送邮件服务器，server-接收邮件服务器</li>
</ul>

<p>使用TCP传输，端口25。</p>

<p>从发送服务器到接收服务器直接传输</p>

<p>三个传输步骤：</p>

<ol>
  <li>握手</li>
  <li>传输信息</li>
  <li>关闭</li>
</ol>

<p>命令/回应交互</p>

<p>命令：ASCII文本回应：状态码与短语</p>

<p>消息必须以7bitASCII文本传输。</p>

<p>SMTP以CRLF来判断信息终止。</p>

<p>信息格式：</p>

<p>头部+空行+信息主题</p>

<p>头部：To From Subject，不同与SMTP的FROM, RCPT, TO命令</p>

<p>主体：ASCII文本信息</p>

<h2 id="mail-access-protocal">邮件接入协议(mail access protocal)</h2>

<p>邮件接入协议：POP,IMAP,HTTP</p>

<ul>
  <li>POP3：下载-保存，将信息在客户端保存一份副本</li>
  <li>IMAP：所有的信息保存在服务器，允许用户以文件夹形式组织信息，通过会话保存用户状态</li>
</ul>

<h1 id="domain-name-system-dns">域名系统(Domain Name System, DNS)</h1>

<p>分布式的数据库，通过许多命名服务器(name server)的层级关系实现。应用层协议，主机与命名服务器交流来解析域名。</p>

<p>DNS（Domain Name System，域名系统），因特网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过主机名，最终得到该主机名对应的IP地址的过程叫做域名解析（或主机名解析）。DNS协议运行在UDP协议之上，使用端口号53。在RFC文档中RFC 2181对DNS有规范说明，RFC 2136对DNS的动态更新进行说明，RFC 2308对DNS查询的反向缓存进行说明。</p>

<h2 id="section-5">层级</h2>

<ol>
  <li>根服务器(root name server)</li>
  <li>com,org,edu…顶级服务器</li>
  <li>授权DNS服务器(authoritative DNS Server)</li>
  <li>本地DNS服务器(local DNS Server)</li>
</ol>

<h2 id="section-6">解析顺序</h2>

<p>主机-&gt;本地DNS-&gt;根服务器-&gt;顶级服务器-&gt;授权DNS服务器-&gt;目标主机</p>

<h2 id="section-7">缓存</h2>

<p>当一个命名服务器建立了映射，他会将该映射缓存。主要而言，本地服务器将缓存这些映射以减轻根服务器与顶级服务器的压力。</p>

<p>但是，缓存可能过期，这会导致寻找不到目标主机。RFC2136标准定义了缓存更新/通知机制。</p>

<h1 id="p2p-1">P2P应用</h1>

<h2 id="p2p-2">纯P2P架构</h2>

<ul>
  <li>没有一直运行的服务器</li>
  <li>任意数量的终端直接连接</li>
  <li>终端之间间歇性的链接，可能改变IP地址。</li>
</ul>

<p>例子：</p>

<ul>
  <li>文件分布(BitTorrent, BT协议)</li>
  <li>流媒体(迅雷看看？！)</li>
  <li>VoIP(Skype)</li>
</ul>

<h3 id="cs-vs-p2p">文件分布：C/S vs P2P</h3>

<p>在C/S架构下，上传下载数度有一个极限。</p>

<p>对于服务器来说，必须持续地上传N个文件副本。</p>

<ul>
  <li>传送一个副本：$F / u_s$</li>
  <li>传送多个副本：$NF / u_s$</li>
</ul>

<p>对于客户端来说，每个客户端都需要下载一份文件</p>

<p>最小下载时间： $F / d_{min}$</p>

<p>我们可以得到总时间为：</p>

<p>$ D_{c-s} \geq max \lbrace NF / u_s, F / d_{min} \rbrace $</p>

<p>其中N是线性增长的。</p>

<p>P2P架构下，服务器需要上传至少一个副本，客户端下载时间同上，对于多个分布式系统而言，他们总共需要上传$NF$大小的文件量，最大上传速度为$u_s + \Sigma u_i$</p>

<p>总时间为：</p>

<p>$ D_{p2p} \geq max \lbrace F / u_s, F / d_{min}, NF / (u_s + \Sigma u_i) \rbrace $</p>

<p>N的线性增长在某种程度上被$\Sigma u_i$所抵消。</p>

<h3 id="bittorrent">BitTorrent协议</h3>

<p>文件被分割成256kb的小段，各个终端收发文件段。有一个追踪服务器来保存当前参与torrent的终端的列表，当一个终端进入此网络时，它更新终端列表，然后开始同这些终端交换文件段。一般而言，终端只跟总终端的某个子集(邻居)进行文件交换。</p>

<p>刚进入网络的终端可能没有任何文件段，但是随着时间推移他会收到文件段直到完成传输。</p>

<p>请求文件段：</p>

<p>在任意给定的时间，不同的终端都有不同的文件子集。终端向其他终端请求传输他们有的文件块，优先请求最珍稀的。</p>

<p>发送文件段：tit-for-tat</p>

<p>终端向正在给他发送文件段的4个终端以最高速度发送文件，每10秒钟重新计算最高速度的四个终端。每30秒钟随机选择一个终端，开始发送文件段。</p>

</body></html>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://MeowAlienOwO.github.io/tags/#application layer" title="Pages tagged application layer" class="tag"><span class="term">application layer</span></a><a href="http://MeowAlienOwO.github.io/tags/#cs" title="Pages tagged cs" class="tag"><span class="term">cs</span></a><a href="http://MeowAlienOwO.github.io/tags/#notes" title="Pages tagged notes" class="tag"><span class="term">notes</span></a></span>
        
        <div class="social-share" >
  <!-- <ul class="socialcount socialcount-small inline-list"> -->
  <!--   <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://MeowAlienOwO.github.io/computer%20science/network/application_layer/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li> -->
  <!--   <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://MeowAlienOwO.github.io/computer%20science/network/application_layer/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li> -->
  <!--   <li class="googleplus"><a href="https://plus.google.com/share?url=http://MeowAlienOwO.github.io/computer%20science/network/application_layer/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li> -->
  <!-- </ul> -->
</div><!-- /.social-share -->

      </footer>
    </div><!-- /.entry-content -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="http://MeowAlienOwO.github.io/computer%20science/network/transport_layer/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="http://MeowAlienOwO.github.io/machine%20learning/machine_learning_review-introduction/" title="Machine Learning Review:Introduction">Machine Learning Review:Introduction</a></h3>
      <p>本学期机器学习的一个复习，还是跟大三下一样会写一个系列，就当为GRE跟师匠攒人品了。// 话说就课了一个礼拜的夜宵钱就出了总司什么情况……不会败人品吧……# What is Machine Learning?在西瓜书里，给出了这么一个定义：> 机器学习是这样一门学科：它致力...&hellip; <a href="http://MeowAlienOwO.github.io/machine%20learning/machine_learning_review-introduction/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="http://MeowAlienOwO.github.io/linux/linux_from_living_to_installbility/" title="linux:从入门到装逼">linux:从入门到装逼</a></h4>
        <span>Published on November 06, 2016</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="http://MeowAlienOwO.github.io/%E7%94%9F%E6%B4%BB/%E4%BD%9C%E6%AD%BB%E7%AC%AC%E5%9B%9B%E5%91%A8/" title="作死第四周">作死第四周</a></h4>
        <span>Published on February 23, 2016</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->

  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 死鱼眼的喵星人. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/" rel="notfollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://MeowAlienOwO.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://MeowAlienOwO.github.io/assets/js/scripts.min.js"></script>

<script type="text/javascript" src="/assets/js/vendor/share.min.js"></script>




    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'meowalienowogithubio'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	        

</body>

</html>
